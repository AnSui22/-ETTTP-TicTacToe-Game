## 23-1 Ewha Womans University Information and Communication Engineering 

### ETTTP-TicTacToe-Game
##### skeleton μ½”λ“λ” μ΄ν™”μ—¬μλ€ν•™κµ μ΄ν•μ¤€ κµμλ‹μ μ •λ³΄ν†µμ‹ κ³µν•™ κ³Όμ μ—μ„ κ°€μ Έμ¨ κ²ƒμ΄κ³ , 

##### λ‚λ¨Έμ§€ μ½”λ“λ” μμ²΄μ μΌλ΅ μ‘μ„±ν• κ²ƒμ…λ‹λ‹¤. 
---
### π–¥μ½”λ“ μ„¤λ…
**1. Server**

    λ¨Όμ € μ„λ²„λ” 0, 1 μ¤‘μ— λλ¤μΌλ΅ μ«μλ¥Ό κ³¨λΌ μ‹μ‘μμ„λ¥Ό κ²°μ •ν•κ³  ν΄λΌμ΄μ–ΈνΈμ—κ² μΈμ½”λ”©ν•μ—¬ μ „μ†΅ν•λ‹¤.
   
    μ‹μ‘ μμ„ 0: μ„λ²„κ°€ λ¨Όμ € μ‹μ‘ 
    
    -> λ©”μ‹μ§€μ— 'ME'λ¥Ό ν¬ν•¨ν•μ—¬ μ„λ²„κ°€ λ¨Όμ € μ‹μ‘ν•λ‹¤λ” λ©”μ‹μ§€λ¥Ό μ „μ†΅
   
    μ‹μ‘ μμ„ 1: ν΄λΌμ΄μ–ΈνΈκ°€ λ¨Όμ € μ‹μ‘ 
    
    -> λ©”μ‹μ§€μ— 'YOU'λ¥Ό ν¬ν•¨ν•μ—¬ ν΄λΌμ΄μ–ΈνΈκ°€ λ¨Όμ € μ‹μ‘ν•λ‹¤λ” λ©”μ‹μ§€λ¥Ό μ „μ†΅
   
    ν΄λΌμ΄μ–ΈνΈ μ†μΌ“μΌλ΅λ¶€ν„° λ©”μ‹μ§€κ°€ μ•λ§μ€ ETTTP ν•μ‹μΈμ§€, 
    
    μ¬λ°”λ¥Έ IP μ£Όμ†λ¥Ό ν¬ν•¨ν•μ€λ”μ§€ ν™•μΈλ°›κ³  ACK λ©”μ‹μ§€λ¥Ό μμ‹ ν• ν›„ λ””μ½”λ”©ν•λ‹¤.
   
    ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° μμ‹ ν• ACK λ©”μ‹μ§€κ°€ ETTTP ν•μ‹μ— λ§λ”μ§€ check_msg ν•¨μλ¥Ό μ‚¬μ©ν•μ—¬ ν™•μΈν•λ‹¤.
   
    λ§μ•½ ν•μ‹μ— λ§μ§€ μ•μΌλ©΄ μ„λ²„ μ†μΌ“μ„ λ‹«κ³  μΆ…λ£ν•λ‹¤.

---

**2. Client**

    ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„κ°€ μ „μ†΅ν• start λ³€μλ¥Ό λ°›κ³  first_mover decision λ©”μ‹μ§€λ¥Ό λ°›λ”λ‹¤.

    μ„λ²„κ°€ μ „μ†΅ν• first_mover decision λ©”μ‹μ§€κ°€ ETTTP ν•μ‹μ— λ§λ” μ§€, 
    
    μ•λ§μ€ IP μ£Όμ†λ¥Ό ν¬ν•¨ν–λ”μ§€ ν™•μΈν•κ³  ACKμ„ λ³΄λ‚Έλ‹¤.

    λ§μ•½ ν•μ‹μ— λ§μ§€ μ•μΌλ©΄ ν΄λΌμ΄μ–ΈνΈ μ†μΌ“μ„ λ‹«κ³  μΆ…λ£ν•λ‹¤.
   
---

**3. TicTacToe**

***Get_move()***
    
    μƒλ€λ°©μ΄ μ„ νƒν• μ„μΉλ¥Ό λ©”μ‹μ§€λ΅ λ°›μ•„ ETTTP ν•μ‹μΈμ§€ ν™•μΈν•κ³  λ§λ‹¤λ©΄ ACKμ„ λ³΄λ‚΄κ³  μ„μΉλ¥Ό μ €μ¥ν•λ‹¤.

    μƒλ€λ°©μΌλ΅λ¶€ν„° μƒλ€λ°©μ new_move λ©”μ‹μ§€λ¥Ό λ°›λ”λ‹¤.
    
    λ°›μ€ λ©”μ‹μ§€μ—μ„ peerμ new_move μΆν‘λ§ μ–»κΈ° μ„ν•΄ λ©”μ‹μ§€μ νΉμλ¬Έμλ¥Ό κ³µλ°±μΌλ΅ λ€μ²΄ν•κ³  νμ‹±ν•μ€λ‹¤.
    
    νμ‹±ν• κ°κ°μ μ •λ³΄λ¥Ό λ¦¬μ¤νΈμ— μ €μ¥ν• ν›„ μ΄ λ¦¬μ¤νΈμ—μ„ new_move μΆν‘λ¥Ό μ¶”μ¶ν•μ—¬ move_lineμ— μ €μ¥ν•λ‹¤.
    
    move_lineμ ν–‰κ³Ό μ—΄μΆν‘λ¥Ό μ¶”μ¶ν•μ—¬ κ°κ° μ €μ¥ν•κ³  move_lineμ„ ν¬ν•¨ν• ack λ©”μ‹μ§€λ¥Ό μ‘μ„±ν•λ‹¤.
    
    check_msg ν•¨μλ¥Ό ν†µν•μ—¬ ETTTP ν•μ‹μ— λ§λ”μ§€, IP μ£Όμ†κ°€ μμ‹ μ IP μ£Όμ†μ™€ κ°™μ€μ§€ ν™•μΈν•κ³ 

    λ©”μ‹μ§€κ°€ μ ν¨ν•μ§€ μ•μΌλ©΄ μ†μΌ“μ„ λ‹«κ³  μΆ…λ£ν•λ‹¤.

    λ©”μ‹μ§€κ°€ μ ν¨ν•λ©΄ ACKμ„ μ „μ†΅ν•κ³  loc λ³€μμ— μƒλ€λ°©μ μΆν‘λ¥Ό 0~8μ μ«μλ΅ μ €μ¥ν•λ‹¤.

***Send_debug()***

    λ³΄λ“λ¥Ό ν΄λ¦­ν•μ§€ μ•κ³  μ‚¬μ©μλ΅λ¶€ν„° ETTTP λ©”μ‹μ§€λ¥Ό μ§μ ‘ μ…λ ¥λ°›μ•„μ„ λ©”μ‹μ§€κ°€ μ•λ§μ€ ν•μ‹μΈμ§€,

    μ…λ ¥λ°›μ€ μΆν‘κ°€ λΉ„μ–΄μλ”μ§€ ν™•μΈ ν›„ peerμ—κ² μμ‹ μ new_moveμ— κ΄€ν• ETTTP λ©”μ‹μ§€λ¥Ό μ‘μ„±ν•κ³  
    
    ackμ„ λ°›μ€ ν›„ λ³΄λ“λ¥Ό μ—…λ°μ΄νΈν•λ” ν•¨μμ΄λ‹¤.

    Gui μ°½μ ν…μ¤νΈ λ°•μ¤μ— μ‚¬μ©μκ°€ μ‘μ„±ν• λ©”μ‹μ§€λ¥Ό d_msgμ— μ €μ¥ν•κ³  get_moveμ—μ„μ™€ κ°™μ΄

    d_msgμ νΉμλ¬Έμλ“¤μ„ κ³µλ°±μΌλ΅ λ€μ²΄ν•κ³  κ³µλ°±μ„ κΈ°μ¤€μΌλ΅ λ©”μ‹μ§€λ¥Ό νμ‹±ν•μ—¬ λ¦¬μ¤νΈμ— μ €μ¥ν•λ‹¤.

    λ¦¬μ¤νΈλ΅λ¶€ν„° ν–‰κ³Ό μ—΄μΆν‘λ¥Ό μ¶”μ¶ν•μ—¬ user_moveμ μ„μΉλ¥Ό 0~8μ μ«μλ΅ λ³€ν™ν•λ‹¤.

    κ·Έ μ„μΉκ°€ μ΄λ―Έ μ±„μ›μ Έ μλ‹¤λ©΄ μ•„λ¬΄κ²ƒλ„ μ‹¤ν–‰ν•μ§€ μ•κ³  λ¦¬ν„΄ν•λ‹¤.

    μ„μΉκ°€ λΉ„μ–΄ μλ‹¤λ©΄ peerμ—κ² λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•λ‹¤.

    peerκ°€ λ©”μ‹μ§€λ¥Ό ν™•μΈν•κ³  ackμ„ λ³΄λ‚΄λ©΄ ackμ΄ ETTTP ν•μ‹μ— λ§λ”μ§€ ν™•μΈν•κ³  
    
    λ¬Έμ κ°€ μ—†λ‹¤λ©΄ locμ— μ„μΉλ¥Ό μ €μ¥ν•κ³  λ³΄λ“λ¥Ό μ—…λ°μ΄νΈν•λ‹¤.

***Send_move()***

    λ²„νΌμ„ λλ €μ„ λ• peerμ—κ² λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•κ³  peerκ°€ λ©”μ‹μ§€λ¥Ό ν™•μΈ ν›„ ackμ„ λ³΄λƒμ„ λ• μ΄ ackμ„ ν™•μΈν•λ‹¤.

    divmodλ΅ selectionμ ν–‰κ³Ό μ—΄μ„ κ³„μ‚°ν•κ³  ETTTP λ©”μ‹μ§€μ— μ„ νƒν• μΆν‘λ¥Ό ν¬ν•¨ν•μ—¬ peerμ—κ² μ „μ†΅ν•λ‹¤.

    Peerκ°€ λ©”μ‹μ§€λ¥Ό λ°›κ³  ν™•μΈν• λ’¤ ackμ„ λ³΄λ‚΄λ©΄ ackμ΄ ν•μ‹μ— λ§λ”μ§€ μ²΄ν¬ν•μ—¬ true/falseλ¥Ό λ°ν™ν•λ‹¤.

   
***Check_result()***
      
    κ²μ„μ΄ λλ‚¬μ„ λ• serverμ™€ clientμ κ²°κ³Όκ°€ κ°™μ€ μ§€ ν™•μΈν•μ—¬ κ°™μΌλ©΄ True, ν‹€λ¦¬λ©΄ Falseλ¥Ό λ°ν™ν•λ‹¤.

    Getμ΄ FalseμΈ κ²½μ°, μ΄ μ μ €λ” μΉμμ΄λ―€λ΅ μμ‹ μ κ²°κ³Όλ¥Ό μƒλ€λ°©μ—κ² 
    
    Winner:MEλ¥Ό ν¬ν•¨ν•λ” λ©”μ‹μ§€ ν•νƒλ΅ μ „μ†΅ν•λ‹¤.
   
    μƒλ€λ°©μ€ μ΄ λ©”μ‹μ§€λ¥Ό λ°›μ€ ν›„ check_msg ν•¨μλ¥Ό ν†µν•΄ ETTTPν•μ‹μ΄ λ§λ”μ§€, 
    
    μμ‹ μ IPμ£Όμ†μ™€ κ°™μ€ μ§€ ν™•μΈν•κ³  λ§λ‹¤λ©΄ κ²°κ³Όλ¥Ό λΉ„κµν•λ‹¤.

    λ§μ•½ λ§μ§€ μ•λ‹¤λ©΄ Falseλ¥Ό λ°ν™ν•λ‹¤.

    κ²°κ³Όλ¥Ό λΉ„κµν•  λ• λ°›μ€ λ©”μ‹μ§€μ—μ„ winnerλ§ μ–»κΈ° μ„ν•΄ 
    
    λ©”μ‹μ§€μ νΉμλ¬Έμλ¥Ό κ³µλ°±μΌλ΅ λ€μ²΄ν•κ³  νμ‹±ν•μ€λ‹¤.

    νμ‹±ν• μ •λ³΄λ¥Ό λ¦¬μ¤νΈμ— μ €μ¥ν• ν›„ winnerλ¥Ό μ¶”μ¶ν•μ—¬ peer_resultμ— μ €μ¥ν•λ‹¤.

    Peer_resultμ™€ κ²°κ³Όκ°€ κ°™λ‹¤λ©΄ μμ‹ μ κ²°κ³Όλ¥Ό μƒλ€λ°©μ—κ² μ†μΌ“μ„ ν†µν•΄ 
    
    Winner: YOUλ¥Ό ν¬ν•¨ν•λ” λ©”μ‹μ§€ ν•νƒλ΅ μ „μ†΅ν•λ‹¤.

    μ΄ λ©”μ‹μ§€λ¥Ό λ°›κ³  check_msg ν•¨μλ¥Ό ν†µν•΄ ETTTPν•μ‹μ΄ λ§λ”μ§€, 
    
    μμ‹ μ IPμ£Όμ†μ™€ κ°™μ€ μ§€ ν™•μΈν•κ³  λ§λ‹¤λ©΄ κ²°κ³Όλ¥Ό λΉ„κµν•λ‹¤.

    λ§μ•½ λ§μ§€ μ•λ‹¤λ©΄ Falseλ¥Ό λ°ν™ν•λ‹¤.

    μ• κ²½μ°μ™€ λ§μ°¬κ°€μ§€λ΅ Peer_resultμ— μ €μ¥ν•μ—¬ κ²°κ³Όκ°€ κ°™μ€ μ§€ ν™•μΈν•λ‹¤.

    κ²°κ³Όκ°€ κ°™λ‹¤λ©΄ Trueλ¥Ό λ°ν™ν•κ³  ν‹€λ¦¬λ©΄ Falseλ¥Ό λ°ν™ν•λ‹¤.

***Check_msg()***

    λ³€μλ΅ λ°›μ€ msgμ—μ„ ν†µμ‹  ν”„λ΅ν† μ½κ³Ό IPμ£Όμ†λ¥Ό μ¶”μ¶ν•μ—¬ μ¬λ°”λ¥Έ ETTTP ν•μ‹μΈμ§€,

    μ¶”μ¶ν• IPμ£Όμ†κ°€ λ³€μλ΅ λ°›μ€ recv_ipμ™€ κ°™μ€ μ§€ ν™•μΈ ν›„ True/Falseλ¥Ό λ°ν™ν•λ‹¤.
 
    λ°›μ€ λ©”μ‹μ§€μ—μ„ ν†µμ‹  ν”„λ΅ν† μ½κ³Ό IPμ£Όμ†λ§ μ–»κΈ° μ„ν•΄ 
    
    λ©”μ‹μ§€μ νΉμλ¬Έμλ¥Ό κ³µλ°±μΌλ΅ λ€μ²΄ν•κ³  νμ‹±ν•μ€λ‹¤.

    νμ‹±ν• μ •λ³΄λ¥Ό λ¦¬μ¤νΈμ— μ €μ¥ν• ν›„ ν†µμ‹  ν”„λ΅ν† μ½κ³Ό IPμ£Όμ†λ¥Ό μ¶”μ¶ν•μ—¬ versionsμ™€ ip_lineμ— κ°κ° μ €μ¥ν•λ‹¤.

    μ΄ ν”„λ΅ν† μ½μ΄ ETTTPν•μ‹μ΄ λ§λ” μ§€, ip_lineμ΄ λ³€μλ΅ λ°›μ€ recv_ipμ™€ κ°™μ€ μ§€ ν™•μΈ ν›„ True/Falseλ¥Ό λ°ν™ν•λ‹¤.


    
